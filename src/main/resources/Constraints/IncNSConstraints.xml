<?xml version="1.0" encoding="UTF-8"?> 
<PrismConstraints 
    xmlns="http://libhpc.doc.ic.ac.uk/prism/constraints"  
    xmlns:prism="http://libhpc.doc.ic.ac.uk/prism/constraints"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://libhpc.doc.ic.ac.uk/prism/constraints PRISMConstraints.xsd">
    
    <description>Constraints for the Nektar++ Incompressible Navier-Stokes Solver</description>
    
    <!-- This should be the solver name exactly as it appears in the root node
         of the tree that these constraints relate to. 
    -->
    <solver>IncompressibleNavierStokes</solver>
    
    <variables>
      <variable path="NumericalSpecification.SolverType" name="SolverType">
        <domain>
          <value>CoupledLinearNS</value>
          <value>VelocityCorrectionScheme</value>
          <value>VCSWeakPressure</value>
        </domain>
      </variable>      

      <variable path="NumericalSpecification.TimeIntegration.TimeIntegrationMethod" 
                name="TimeIntegrationMethod">
        <domain>
          <value>NotProvided</value>
          <value>IMEXOrder1</value>
          <value>IMEXOrder2</value>
          <value>IMEXOrder3</value>
          <value>DIRKOrder1</value>
          <value>ForwardEuler</value>
          <value>BackwardEuler</value>
          <value>ClassicalRungeKutta4</value>
        </domain>
      </variable>
      
      <variable path="NumericalSpecification.Projection" name="Projection">
        <domain>
          <value>ContinuousGalerkin</value>
          <value>DiscontinuousGalerkin</value>
        </domain>
      </variable>      

    </variables>
    
    <constraints>
      <!-- Mapping of Solver Type to the Time Integration Method -->
      <mapping variable="SolverType" varvalue="CoupledLinearNS" targetVariable="TimeIntegrationMethod">
        <targetValue>NotProvided</targetValue>
      </mapping>
      <mapping variable="SolverType" varvalue="VelocityCorrectionScheme" targetVariable="TimeIntegrationMethod">
        <targetValue>IMEXOrder1</targetValue>
        <targetValue>IMEXOrder2</targetValue>
        <targetValue>IMEXOrder3</targetValue>
        <targetValue>DIRKOrder1</targetValue>
        <targetValue>ForwardEuler</targetValue>
        <targetValue>BackwardEuler</targetValue>
        <targetValue>ClassicalRungeKutta4</targetValue>
      </mapping>
      <mapping variable="SolverType" varvalue="VCSWeakPressure" targetVariable="TimeIntegrationMethod">
        <targetValue>IMEXOrder1</targetValue>
        <targetValue>IMEXOrder2</targetValue>
        <targetValue>IMEXOrder3</targetValue>
        <targetValue>DIRKOrder1</targetValue>
        <targetValue>ForwardEuler</targetValue>
        <targetValue>BackwardEuler</targetValue>
        <targetValue>ClassicalRungeKutta4</targetValue>
      </mapping>

      <!-- Mapping of solver type with projection type -->
      <mapping variable="SolverType" varvalue="VelocityCorrectionScheme" targetVariable="Projection">
        <targetValue>ContinuousGalerkin</targetValue>
        <targetValue>DiscontinuousGalerkin</targetValue>
      </mapping>
      <mapping variable="SolverType" varvalue="VCSWeakPressure" targetVariable="Projection">
        <targetValue>ContinuousGalerkin</targetValue>
        <targetValue>DiscontinuousGalerkin</targetValue>
      </mapping>
      <mapping variable="SolverType" varvalue="CoupledLinearNS" targetVariable="Projection">
        <targetValue>ContinuousGalerkin</targetValue>
      </mapping>

      <!-- Mapping time integration type against projection type -->
      <mapping variable="TimeIntegrationMethod" varvalue="IMEXOrder1" targetVariable="Projection">
        <targetValue>ContinuousGalerkin</targetValue>
      </mapping>
      <mapping variable="TimeIntegrationMethod" varvalue="IMEXOrder2" targetVariable="Projection">
        <targetValue>ContinuousGalerkin</targetValue>
      </mapping>
      <mapping variable="TimeIntegrationMethod" varvalue="IMEXOrder3" targetVariable="Projection">
        <targetValue>ContinuousGalerkin</targetValue>
      </mapping>
      <mapping variable="TimeIntegrationMethod" varvalue="BackwardEuler" targetVariable="Projection">
        <targetValue>ContinuousGalerkin</targetValue>
        <targetValue>DiscontinuousGalerkin</targetValue>
      </mapping>
      <mapping variable="TimeIntegrationMethod" varvalue="ForwardEuler" targetVariable="Projection">
        <targetValue>ContinuousGalerkin</targetValue>
        <targetValue>DiscontinuousGalerkin</targetValue>
      </mapping>
      <mapping variable="TimeIntegrationMethod" varvalue="ClassicalRungeKutta4" targetVariable="Projection">
        <targetValue>ContinuousGalerkin</targetValue>
        <targetValue>DiscontinuousGalerkin</targetValue>
      </mapping>
      <mapping variable="TimeIntegrationMethod" varvalue="DIRKOrder1" targetVariable="Projection">
        <targetValue>ContinuousGalerkin</targetValue>
        <targetValue>DiscontinuousGalerkin</targetValue>
      </mapping>


    </constraints>              
                  
</PrismConstraints>